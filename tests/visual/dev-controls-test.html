<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>Controls Demo</title>
        <link rel="stylesheet" href="../../css/styles.css" />
        <link rel="stylesheet" href="../../demos/player-style-simple-controls.css" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
        <!-- ui-components -->
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">
        </script>
        <!-- END:  ui-components --><!-- jQuery UI theme switcher -->
        <link class="ui-theme" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/blitzer/jquery-ui.css"/>
        <!-- END: jQuery UI theme switcher -->
        <script src="../../src/mm.base-embed.js">
        </script>
        <script src="../../src/mm.base-api.js">
        </script>
        <script src="../../src/mm.base-controls.js"></script>
		<script src="../../plugins/fullwindow.js"></script>
		<!--
		<script src="../../src/mm.qtp-embed.js">
        </script>
        <script src="../../src/mm.qtp-api.js">
        </script>
		<script src="../../src/dev/mm.cortado-embed.js"></script>
		<script src="../../src/dev/mm.cortado-api.js"></script>
		-->
		
		<script src="../../src/mm.jwplayer-embed.js"></script>
		<script src="../../src/mm.jwplayer-api.js"></script>
		
		<!--
		<script src="../../src/mm.vlc-embed.js"></script>
		<script src="../../src/mm.vlc-api.js"></script>
		-->
		
        <script>
            (function(){
                window.params = {};
                var paramArray = (location.search || '').replace('?', '').split('&');
                
                $.each(paramArray, function(i, param){
                    param = param.split('=');
                    params[param[0]] = param[1];
                });
				if(params.apiOrder){
					$.fn.mediaElementEmbed.defaults.apiOrder = params.apiOrder.split(',');
				}
            })();
        </script>
        <script>
        $('html').addClass('js-on');
        
        
        $(function(){
			$('html').addClass('js-ready');
            if (!window.console) {
                if (window.opera) {
                    window.console = {
                        log: opera.postError
                    };
                } else {
                    window.console = {
                        log: function(message){
                            setTimeout(function(){
                                throw message;
                            }, 0);
                        }
                    };
                }
            }
			
            $('video, audio')
			.jmeEmbed({
                debug: ('debug' in params),
                //removeControls: true,
				showFallback: true,
                jwPlayer: {
                    path: '../../mediaplayers/jw-player/player.swf',
					params: {
						wmode: 'transparent'
					}
                },
				cortado: {
					path: '../../mediaplayers/cortado/cortado.jar'
				}
            });
            //test apiready
//			$('audio').jmeReady(function(){		
//				$(this).loadSrc(['../../demos/media/ANC_sketchV2n.mp3', '../../demos/media/ANC_sketchV2n.ogg']);
//			});
                       
            $('div[data-controlwrapper]').registerMMControl({
				
						mediaControls: {
							dynamicTimeslider: true,
							timeSliderAdjust: -10
						}
			});
            
             
             $('a.load-video').click(function(e){
	             e.preventDefault();
	             $(this).closest('div.test-wrapper').find('video, audio').attr('poster', $('a.poster')[0].href).loadSrc(this.href);
             });
			 
			 $('a.enter-fs').click(function(e){
	             e.preventDefault();
	             var media = $(this).closest('div.test-wrapper').find('video, audio');
				 if(media.attr('supportsFullScreen')){
				 	media.enterFullScreen();
				 } else {
				 	alert('not supported, try right click/doubble-click on video');
				 }
             });
			 $('a.enter-fw ').click(function(e){
	             e.preventDefault();
	             var media = $(this).closest('div.test-wrapper').find('video, audio');
				 media.enterFullWindow();
				 //media.play();
             }); 
			            
        });
        </script>
        <!-- lazy load themeswitcher -->
        <script>
            (function($){
                var script;
                function startThemeswitcher(){
                    if (!this.readyState || this.readyState == "loaded" || this.readyState == "complete") {
                        $('<div class="demo-themeswitcher" />').prependTo('body').themeswitcher({
                            height: 150,
							onSelect: function(){
								setTimeout(function(){
									$('video, audio').triggerHandler('resize');
								}, 300);
							}
                        });
                        script.unbind('load readystatechange');
                    }
                }
                setTimeout(function(){
                    script = $("<script src='http://ui.jquery.com/applications/themeroller/themeswitchertool/'><\/script>").bind('load readystatechange', startThemeswitcher).appendTo('head');
                }, 9);
            })(jQuery);
        </script>
    </head>
    <body>       
		<a href="../../demos/media/loader.gif" class="poster" style="display: none;"></a>
		<div id="log"></div>
		<button class="prepend">prepend video</button>
		<script>
			var videoHTML = '<div><video class="dynamic" poster="../../demos/media/bbb_watchtrailer.gif" controls="controls"> \
					<source src="../../demos/media/bbb_trailer_mobile.m4v"></source> \
					<source src="../../demos/media/bbb_trailer_400p.ogg"></source> \
                    <a class="source" href="../../demos/media/bbb_trailer_400p.ogg">title</a> \
                    <a class="source" href="../../demos/media/bbb_trailer_mobile.m4v">title</a> \
                </video></div>'
			;
			$('button.prepend').click(function(){
				
				$('body').prepend($.fixHTML5(videoHTML));
				
				$('video.dynamic')
					.jmeEmbed({
		                //removeControls: true,
						showFallback: true,
		                jwPlayer: {
		                    path: '../../mediaplayers/jw-player/player.swf',
							params: {
								wmode: 'transparent'
							}
		                },
						cortado: {
							path: '../../mediaplayers/cortado/cortado.jar'
						}
		            });
			});
		</script>
		
		
        <div class="test-wrapper">
            <div class="ui-media-player" data-controlwrapper="controlwrapper">
                <audio controls="controls">
					<source src="../../demos/media/swazzrokk_v1.mp3"></source>
					<source src="../../demos/media/swazzrokk_v1.ogg"></source>
					<p>Fallback-Content</p>
                </audio>
				
				
                <div class="media-controls ui-widget ui-widget-header ui-corner-all">
                    <a class="play-pause">
                        <span class="ui-icon ui-icon-play"></span>
                        <span class="button-text">play / pause</span>
                    </a>
                    <div class="timeline-slider">
                        <div class="progressbar">
                        </div>
                    </div>
                    <a class="mute-unmute">
                        <span class="ui-icon ui-icon-play"></span>
                        <span class="button-text">mute / unmute</span>
                    </a>
                    <div class="volume-slider">
                    	<span class="ui-slider-handle" tabindex="0"></span>
                    </div>
                </div>
                <div class="duration">
                </div>
                <div class="current-time">
                </div>
				 <div class="remaining-time">
                </div>
            </div>
        </div>


		
        <div class="test-wrapper">
            <div class="ui-media-player" data-controlwrapper="controlwrapper">
            	
                <video src="http://www.youtube.com/watch?v=siOHh0uzcuY" poster="../../demos/media/bbb_watchtrailer.gif" controls="controls" id="video-1">
					<source src="../../demos/media/bbb_trailer_mobile.m4v">
                    </source>
					<source src="../../demos/media/bbb_trailer_400p.ogg">
                    </source>
					
					<p>Fallback-Content</p>
                    <a class="source" href="../../demos/media/bbb_trailer_400p.ogg">title</a>
                    
                    <a class="source" href="../../demos/media/bbb_trailer_mobile.m4v">title</a>
                </video>
                <div class="media-controls ui-widget ui-widget-header ui-corner-all">
                    <a class="play-pause">
                        <span class="ui-icon ui-icon-play"></span>
                        <span class="button-text">play / pause</span>
                    </a>
                    <div class="timeline-slider">
                        <div class="progressbar">
                        </div>
                    </div>
                    <a class="mute-unmute">
                        <span class="ui-icon"></span>
                        <span class="button-text">mute / unmute</span>
                    </a>
                    <div class="volume-slider">
                        <span class="ui-slider-handle" tabindex="0"></span>
                    </div>
                </div>
                <div class="duration">
                </div>
                <div class="current-time">
                </div>
				 <div class="remaining-time">
                </div>
            </div>
         	<a href="http://blip.tv/file/get/N8inpasadena-Flowers457.flv" class="load-video">Load-flv</a>
            <a href="../../demos/media/bbb_trailer_400p.ogg" class="load-video load-ogg">Load-ogg</a>
            <a href="../../demos/media/bbb_trailer_mobile.m4v" class="load-video">Load-m4v</a>
			<a href="../../demos/media/hgfh.mghjfg4v" class="load-video">Load-unplayable</a>
			<a href="#" class="enter-fs">enter fullscreen</a>
			<a href="#" class="enter-fw">enter fullwindow</a>
			
            <p>
                (c) copyright Blender Foundation | <a href="http://www.bigbuckbunny.org">www.bigbuckbunny.org</a>
            </p>
        </div>
	
        <!--
        <button class="play-pause" data-controls="video-1"><span class="ui-icon ui-icon-play"> </span><span class="button-text">play / pause</span></button>
        -->
    </body>
</html>
