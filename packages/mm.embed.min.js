/**!
 * Part of the jMediaelement-Project | http://github.com/aFarkas/jMediaelement
 * @author Alexander Farkas
 * Copyright 2010, Alexander Farkas
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(c){function o(){c.event.special.mediaerror.handler.apply(c(this).closest("video, audio")[0],arguments)}function r(a){if(c.support.mediaElements){var b=c.data(this,"mediaElemSupport");if(b&&b.apis){b=b.apis;var d=this,f=c.attr(this,"srces");if(f.length&&!b.nativ.canPlaySrces(f)){setTimeout(function(){c(d).triggerHandler("mediaerror")},0);try{d.pause()}catch(g){}}a&&a.type==="emptied"&&a.orginalEvent&&a.orginalEvent.type==="emptied"&&c(this).unbind("loadstart",r);c("source",this).unbind("error",
o).filter(":last").bind("error",o)}}}function p(a){var b=a.indexOf("?")+1,d="";a=b?a.substring(0,b):a;b=a.lastIndexOf(".")+1;return d=a.substr(b)}function s(a,b){var d=a.nodeName.toLowerCase();b=j.getSuitedPlayers(a,b.apiOrder);var f=c.data(a,"mediaElemSupport");if(b){if(b!=="noSource")j.helper._setAPIActive(a,b.name)||j._embedApi(a,b,f,d)}else{f.apis.nativ._trigger({type:"totalerror"});try{a.pause()}catch(g){}}}function h(){c(this).trigger("multiMediaAPIIsReady")}jQuery.multimediaSupport={};var j=
c.multimediaSupport,m=(new Date).getTime(),t=document;c.support.video=!!c("<video />")[0].canPlayType;c.support.audio=!!c("<audio />")[0].canPlayType;c.support.mediaElements=c.support.video&&c.support.audio;var n=c.attr,v=/video|audio|source/i,q={src:true,poster:true},w={loop:true,autoplay:true,controls:true,autobuffer:true},x={srces:true,getConfig:true};c.attr=function(a,b,d,f){if(!(a.nodeName&&v.test(a.nodeName)&&(x[b]||c.multimediaSupport.attrFns[b]||w[b]||q[b])))return n(a,b,d,f);var g=d!==undefined,
k,e;if(c.multimediaSupport.attrFns[b])if(k=c.data(a,"mediaElemSupport")){e=k.apis[k.name][b](d,f);if(!g)return e}else return n(a,b,d,f);if(g)if(w[b]){d=!!d;(a[b]=d)?a.setAttribute(b,b):a.removeAttribute(b);a[b]=d}else if(q[b])a.setAttribute(b,d);else if(b==="srces"){c("source, a.source",a).remove();a.removeAttribute("src");d=c.isArray(d)?d:[d];c.each(d,function(i,l){e=t.createElement("source");if(typeof l==="string")l={src:l};e.setAttribute("src",l.src);l.type&&e.setAttribute("type",l.type);l.media&&
e.setAttribute("media",l.media);a.appendChild(e)})}else b==="getConfig"&&c.each(d,function(i,l){c.attr(a,i,l)});else{if(w[b])return typeof a[b]==="boolean"?a[b]:!!(a.attributes[b]||{}).specified;if(q[b])return c.support.video&&a[b]||j.helper.makeAbsURI(a.getAttribute(b));if(b==="srces"){if(e=c.attr(a,"src"))e=[{src:e,type:a.getAttribute("type"),media:a.getAttribute("media")}];else{e=[];c("source",a).each(function(){e.push({src:c.attr(this,"src"),type:this.getAttribute("type"),media:this.getAttribute("media")})});
e.length||c("a.source",a).each(function(){e.push({src:this.href,type:this.getAttribute("type"),media:this.getAttribute("data-media")})})}return e}if(b==="getConfig"){e={};c.each(["autobuffer","autoplay","loop","controls","poster"],function(i,l){e[l]=c.attr(a,l)});return e}}};c.event.special.mediaerror={setup:function(){c(this).bind("error",c.event.special.mediaerror.handler).each(r).bind("emtptied",r);c(this).bind("loadstart",r)},teardown:function(){c(this).unbind("error",c.event.special.mediaerror.handler).find("source").unbind("error",
o)},handler:function(a){a=c.extend({},a||{},{type:"mediaerror"});return c.event.handle.apply(this,arguments)}};var u={audio:{"application/ogg":["ogg","oga","ogm"],"audio/mpeg":["mp2","mp3","mpga","mpega"],"audio/mp4":["mp4","mpg4"],"audio/wav":["wav"],"audio/x-m4a":["m4a"],"audio/x-m4p":["m4p"],"audio/3gpp":["3gp","3gpp"]},video:{"application/ogg":["ogg","ogv","ogm"],"video/mpeg":["mpg","mpeg","mpe"],"video/mp4":["mp4","mpg4","m4v"],"video/quicktime":["mov","qt"],"video/x-msvideo":["avi"],"video/x-ms-asf":["asf",
"asx"],"video/flv":["flv","f4v"],"video/3gpp":["3gp","3gpp"]}};c.extend(c.multimediaSupport,{registerMimetype:function(a,b){arguments.length===1?c.each(u,function(d){j.registerMimetype(d,a)}):c.each(b,function(d,f){if(u[a][d])u[a][d]=[];u[a][d]=u[a][d].concat(f)})},_showMimeTypes:function(){window.console&&console.log(u)},attrFns:{},add:function(a,b,d){if(!this.apis[b][a]){this.apis[b][a]=j.helper.beget(this.apiProto);a!=="nativ"&&c.inArray(a,c.fn.mediaElementEmbed.defaults.apiOrder)===-1&&c.fn.mediaElementEmbed.defaults.apiOrder.push(a)}c.extend(true,
this.apis[b][a],d)},apiProto:{_init:function(){},canPlayType:function(a){var b=this.apiElem;if(b&&b.canPlayType)return b.canPlayType(a);a=j.helper.extractContainerCodecsFormType(a);var d=this,f="probably";if(!a[1])return this.canPlayContainer&&c.inArray(a[0],this.canPlayContainer)!==-1?"maybe":"";c.each(a[1],function(g,k){if(!d.canPlayCodecs||c.inArray(k,d.canPlayCodecs)===-1){f="";return false}});return f},canPlaySrc:function(a){var b=this;if(typeof a!=="string"){if(a.type)return this.canPlayType(a.type);
a=a.src}var d=p(a),f="";c.each(u[this.nodeName],function(g,k){if(c.inArray(d,k)!==-1){f=b.canPlayType(g);return false}});return f},canPlaySrces:function(a){a=a||c.attr(this.html5elem,"srces");c.isArray(a)||(a=[a]);var b=this,d=false,f="";c.each(a,function(g,k){if(d=b.canPlaySrc(k)){f=k;return false}});return f},_setActive:c.noop,_setInactive:c.noop,_trigger:c.noop},apis:{audio:{},video:{}},helper:{extractContainerCodecsFormType:function(a){a=a.split(/\s*;\s*/g);if(a[1]&&a[1].indexOf("codecs")!==-1)a[1]=
a[1].replace(/["|']$/,"").replace(/^\s*codecs=('|")/,"").split(/\s*,\s*/g);return a},makeAbsURI:function(){return function(a){if(a&&typeof a==="string")a=c('<a href="'+a+'"></a>')[0].href;return a}}(),beget:function(a){var b=function(){};b.prototype=a;return new b},_create:function(a,b,d,f){var g=c.data(d,"mediaElemSupport")||c.data(d,"mediaElemSupport",{apis:{},nodeName:a});if(!g.apis[b]){g.apis[b]=j.helper.beget(j.apis[a][b]);g.apis[b].html5elem=d;g.apis[b].nodeName=a;g.apis[b].name=b;g.apis[b].data=
{};g.apis[b].embedOpts=f}return g},_setAPIActive:function(a,b){var d=c.data(a,"mediaElemSupport"),f=d.name;if(f===b)return true;var g=d.apis[f].apiElem,k=d.apis[b]&&d.apis[b].apiElem,e=false;if(k&&k.nodeName){if(d.nodeName!=="audio"||c.attr(a,"controls"))d.apis[b].visualElem.css({width:d.apis[f].visualElem.width(),height:d.apis[f].visualElem.height(),visibility:"",display:""});d.apis[b]._setActive(f);e=true;d.apis[b]._trigger({type:"apiActivated",api:b})}if(g&&g.nodeName){if(f==="nativ")g.style.display=
"none";else d.apis[f].visualElem.css({height:0,width:0,overflow:"hidden",visibility:"hidden"});d.apis[f]._setInactive(b);d.apis[e?b:f]._trigger({type:"apiInActivated",api:f})}d.name=b;return e}},getSuitedPlayers:function(a,b){var d=c.data(a,"mediaElemSupport");if(d&&d.apis){d=d.apis;var f=c.attr(a,"srces"),g=false,k=function(e,i){if(!(!i.isTechAvailable||c.isFunction(i.isTechAvailable)&&!i.isTechAvailable())){if(i=i.canPlaySrces(f))g={src:i.src||i,name:e};return g}};if(!f.length)return"noSource";
b?c.each(b,function(e,i){return!k(i,d[i])}):c.each(d,function(e,i){return!k(e,i)});return g}},_embedApi:function(a,b,d){var f=c.attr(a,"getConfig"),g=c(a),k=a.id;if(!k){m++;k=d.nodeName+"-"+m;a.id=k}d.apis[b.name].visualElem=c('<div class="media-element-box mm-'+d.nodeName+'-box" />').insertBefore(a);d.nodeName==="audio"&&!f.controls?d.apis[b.name].visualElem.css({height:0,width:0,overflow:"hidden"}):d.apis[b.name].visualElem.css({width:g.width(),height:g.height()});d.apis[b.name]._embed(b.src,d.name+
"-"+k,f,function(e){d.apis[b.name].apiElem=e;c(e).addClass(d.nodeName);d.apis[b.name]._init();d.apis[b.name]._trigger({type:"apiActivated",api:b.name})})},getPluginVersion:function(a,b){a=b||navigator.plugins&&navigator.plugins[a];b=[-1,0];if(a)if((desc=(a.description||"").replace(/,/g,".").match(/(\d+)/g)||["0"])&&desc[0]){b[0]=desc[0];if(desc[1])b[0]+="."+desc[1];b[0]=parseFloat(b[0],10);if(desc[2])b[1]=parseInt(desc[2],10)}return b},embedObject:function(a,b,d,f,g,k){a=c("<div />").appendTo(a)[0];
var e;if(navigator.plugins&&navigator.plugins[k]){e=t.createElement("object");c.each(d,function(i,l){e.setAttribute(i,l)});c.each(f,function(i,l){var y=t.createElement("param");y.setAttribute("name",i);y.setAttribute("value",l);e.appendChild(y)});e.setAttribute("id",b);e.setAttribute("name",b);a.parentNode.replaceChild(e,a)}else if(window.ActiveXObject){e="<object";c.each(c.extend({},d,g),function(i,l){e+=" "+i+'="'+l+'"'});e+=' name="'+b+'"';e+=' id="'+b+'"';e+=">";c.each(f,function(i,l){e+=' <param name="'+
i+'" value="'+l+'" />'});e+="</object>";a.outerHTML=e;e=t.getElementById(b)}if(e){e.setAttribute("width","100%");e.setAttribute("height","100%")}c(window).unload(function(){jQuery.cleanData([e]);e=null});setTimeout(function(){if(e&&e.setAttribute){e.setAttribute("width","100%");e.setAttribute("height","100%")}},0);return e}});j.add("nativ","video",{});j.add("nativ","audio",{});c.fn.mediaElementEmbed=function(a){a=c.extend(true,{},c.fn.mediaElementEmbed.defaults,a);return this.each(function(){var b=
this.nodeName.toLowerCase();if(!(b!=="video"&&b!=="audio")){var d=this;a.removeControls&&c.attr(this,"controls",false);var f=j.helper._create(b,"nativ",this,a);f.name="nativ";f.apis.nativ.apiElem=this;f.apis.nativ.visualElem=c(this);c.each(j.apis[b],function(g){g!=="nativ"&&j.helper._create(b,g,d,a)});a.debug||!c.support.mediaElements||this.error?s(this,a):f.apis[f.name]._init();c(this).bind("mediaerror",function(){f.name==="nativ"&&s(this,a)}).bind("loadedmetadata",h)}})};c.fn.mediaElementEmbed.defaults=
{debug:false,removeControls:false,apiOrder:[]};if(c.cleanData){var z=c.cleanData;c.cleanData=function(a){z(a);for(var b=0,d=a.length;b<d;b++)if(a[b].nodeName==="OBJECT")try{for(var f in a[b])if(typeof a[b][f]==="function")a[b][f]=null}catch(g){}}}})(jQuery);
(function(c){c.extend(c.fn.mediaElementEmbed.defaults,{jwPlayer:{path:"player.swf",vars:{},attrs:{},params:{allowscriptaccess:"always",allowfullscreen:"true"}}});var o={type:"application/x-shockwave-flash"},r={classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},p=c.multimediaSupport,s={isTechAvailable:function(){if(c.support.flash9!==undefined)return c.support.flash9;c.support.flash9=false;var h=p.getPluginVersion("Shockwave Flash");if(h[0]>9||h[0]===9&&h[1]>=115)c.support.flash9=true;else if(window.ActiveXObject)try{h=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(!h)return;h=p.getPluginVersion("",{description:h.GetVariable("$version")});if(h[0]>9||h[0]===9&&h[1]>=115)c.support.flash9=true}catch(j){}return c.support.flash9},_embed:function(h,j,m,t){var n=this.embedOpts.jwPlayer;h=c.extend({},n.vars,{file:h,id:j});var v=c.extend({name:j,data:n.path},n.attrs,o),q=c.extend({movie:n.path},n.params);if(m.poster)h.image=m.poster;h.autostart=""+m.autoplay;h.repeat=m.loop?"single":"false";h.controlbar=m.controls?
"bottom":"none";if((n.playFirstFrame||m.autobuffer)&&!m.poster&&!m.autoplay){this.data.playFirstFrame=true;h.autostart="true"}q.flashvars=[];c.each(h,function(w,x){q.flashvars.push(w+"="+x)});q.flashvars=q.flashvars.join("&");t(p.embedObject(this.visualElem[0],j,v,q,r,"Shockwave Flash"))},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E","avc1.4D401E","avc1.64001E"],canPlayContainer:["video/3gpp","video/x-msvideo","video/quicktime","video/x-m4v","video/mp4","video/m4p","video/x-flv","video/flv",
"audio/mpeg","audio/mp3","audio/x-fla","audio/fla"]};p.add("jwPlayer","video",s);p.add("jwPlayer","audio",s)})(jQuery);
(function(c){c.extend(c.fn.mediaElementEmbed.defaults,{vlc:{params:{},attrs:{}}});var o=c.multimediaSupport,r={pluginspage:"http://www.videolan.org",version:"VideoLAN.VLCPlugin.2",progid:"VideoLAN.VLCPlugin.2",events:"True",type:"application/x-vlc-plugin"},p={classid:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"},s={isTechAvailable:function(){if(c.support.vlc!==undefined)return c.support.vlc;c.support.vlc=false;if(o.getPluginVersion("VLC Multimedia Plug-in")[0]>=0.9)c.support.vlc=true;else if(window.ActiveXObject)try{if(new ActiveXObject("VideoLAN.VLCPlugin.2"))c.support.vlc=
true}catch(h){}return c.support.vlc},_embed:function(h,j,m,t){var n=this.embedOpts.vlc,v=c.extend({},n.attrs,{data:h},r);m=c.extend({},n.params,{Src:h,ShowDisplay:"True",autoplay:""+m.autoplay,autoloop:""+m.loop});j=o.embedObject(this.visualElem[0],j,v,m,p,"VLC Multimedia Plug-in");this._currentSrc=h;t(j)},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E","avc1.4D401E","avc1.64001E","theora","vorbis"],canPlayContainer:["video/3gpp","video/x-msvideo","video/quicktime","video/x-m4v","video/mp4",
"video/m4p","video/x-flv","video/flv","audio/mpeg","audio/x-fla","audio/fla","video/ogg","video/x-ogg","audio/x-ogg","audio/ogg","application/ogg","application/x-ogg"]};o.add("vlc","video",s);o.add("vlc","audio",s)})(jQuery);
