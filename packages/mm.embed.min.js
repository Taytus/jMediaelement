/**!
 * Part of the jMediaelement-Project | http://github.com/aFarkas/jMediaelement
 * @author Alexander Farkas
 * Copyright 2010, Alexander Farkas
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(b){function o(){b.event.special.mediaerror.handler.apply(b(this).closest("video, audio")[0],arguments)}function q(a){if(b.support.mediaElements){var c=b.data(this,"mediaElemSupport");if(c&&c.apis){c=c.apis;var d=this,e=b.attr(this,"srces");if(e.length&&!c.nativ.canPlaySrces(e)){setTimeout(function(){b(d).triggerHandler("mediaerror")},0);try{d.pause()}catch(h){}}a&&a.type==="emptied"&&a.orginalEvent&&a.orginalEvent.type==="emptied"&&b(this).unbind("loadstart",q);b("source",this).unbind("error",
o).filter(":last").bind("error",o)}}}function r(a){var c=a.indexOf("?")+1,d="";a=c?a.substring(0,c):a;c=a.lastIndexOf(".")+1;return d=a.substr(c)}function s(a,c){var d=a.nodeName.toLowerCase();c=j.getSuitedPlayers(a,c.apiOrder);var e=b.data(a,"mediaElemSupport");if(c){if(c!=="noSource")j.helper._setAPIActive(a,c.name)||j._embedApi(a,c,e,d)}else{e.apis.nativ._trigger({type:"totalerror"});try{a.pause()}catch(h){}}}function k(){b(this).trigger("multiMediaAPIIsReady")}jQuery.multimediaSupport={};var j=
b.multimediaSupport,m=(new Date).getTime(),t=document;b.support.video=!!b("<video />")[0].canPlayType;b.support.audio=!!b("<audio />")[0].canPlayType;b.support.mediaElements=b.support.video&&b.support.audio;var n=b.attr,v=/video|audio|source/i,p={src:true,poster:true},w={loop:true,autoplay:true,controls:true,autobuffer:true},x={srces:true,getConfig:true};b.attr=function(a,c,d,e){if(!(a.nodeName&&v.test(a.nodeName)&&(x[c]||b.multimediaSupport.attrFns[c]||w[c]||p[c])))return n(a,c,d,e);var h=d!==undefined,
f,g;if(b.multimediaSupport.attrFns[c])if(f=b.data(a,"mediaElemSupport")){g=f.apis[f.name][c](d,e);if(!h)return g}else return n(a,c,d,e);if(h)if(w[c]){d=!!d;(a[c]=d)?a.setAttribute(c,c):a.removeAttribute(c);a[c]=d}else if(p[c])a.setAttribute(c,d);else if(c==="srces"){b("source, a.source",a).remove();a.removeAttribute("src");d=b.isArray(d)?d:[d];b.each(d,function(i,l){g=t.createElement("source");if(typeof l==="string")l={src:l};g.setAttribute("src",l.src);l.type&&g.setAttribute("type",l.type);l.media&&
g.setAttribute("media",l.media);a.appendChild(g)})}else c==="getConfig"&&b.each(d,function(i,l){b.attr(a,i,l)});else{if(w[c])return typeof a[c]==="boolean"?a[c]:!!(a.attributes[c]||{}).specified;if(p[c])return b.support.video&&a[c]||j.helper.makeAbsURI(a.getAttribute(c));if(c==="srces"){if(g=b.attr(a,"src"))g=[{src:g,type:a.getAttribute("type"),media:a.getAttribute("media")}];else{g=[];b("source",a).each(function(){g.push({src:b.attr(this,"src"),type:this.getAttribute("type"),media:this.getAttribute("media")})});
g.length||b("a.source",a).each(function(){g.push({src:this.href,type:this.getAttribute("type"),media:this.getAttribute("data-media")})})}return g}if(c==="getConfig"){g={};b.each(["autobuffer","autoplay","loop","controls","poster"],function(i,l){g[l]=b.attr(a,l)});return g}}};b.event.special.mediaerror={setup:function(){b(this).bind("error",b.event.special.mediaerror.handler).each(q).bind("emtptied",q);b(this).bind("loadstart",q)},teardown:function(){b(this).unbind("error",b.event.special.mediaerror.handler).find("source").unbind("error",
o)},handler:function(a){a=b.extend({},a||{},{type:"mediaerror"});return b.event.handle.apply(this,arguments)}};var u={audio:{"application/ogg":["ogg","oga","ogm"],"audio/mpeg":["mp2","mp3","mpga","mpega"],"audio/mp4":["mp4","mpg4"],"audio/wav":["wav"],"audio/x-m4a":["m4a"],"audio/x-m4p":["m4p"]},video:{"application/ogg":["ogg","ogv","ogm"],"video/mpeg":["mpg","mpeg","mpe"],"video/mp4":["mp4","mpg4","m4v"],"video/quicktime":["mov","qt"],"video/x-msvideo":["avi"],"video/x-ms-asf":["asf","asx"],"video/flv":["flv",
"f4v"]}};b.extend(b.multimediaSupport,{registerMimetype:function(a,c){arguments.length===1?b.each(u,function(d){j.registerMimetype(d,a)}):b.each(c,function(d,e){if(u[a][d])u[a][d]=[];u[a][d]=u[a][d].concat(e)})},_showMimeTypes:function(){window.console&&console.log(u)},attrFns:{},add:function(a,c,d){if(!this.apis[c][a]){this.apis[c][a]=j.helper.beget(this.apiProto);a!=="nativ"&&b.inArray(a,b.fn.mediaElementEmbed.defaults.apiOrder)===-1&&b.fn.mediaElementEmbed.defaults.apiOrder.push(a)}b.extend(true,
this.apis[c][a],d)},apiProto:{_init:function(){},canPlayType:function(a){var c=this.apiElem;if(c&&c.canPlayType)return c.canPlayType(a);a=j.helper.extractContainerCodecsFormType(a);var d=this,e="probably";if(!a[1])return this.canPlayContainer&&b.inArray(a[0],this.canPlayContainer)!==-1?"maybe":"";b.each(a[1],function(h,f){if(!d.canPlayCodecs||b.inArray(f,d.canPlayCodecs)===-1){e="";return false}});return e},canPlaySrc:function(a){var c=this;if(typeof a!=="string"){if(a.type)return this.canPlayType(a.type);
a=a.src}var d=r(a),e="";b.each(u[this.nodeName],function(h,f){if(b.inArray(d,f)!==-1){e=c.canPlayType(h);return false}});return e},canPlaySrces:function(a){a=a||b.attr(this.html5elem,"srces");b.isArray(a)||(a=[a]);var c=this,d=false,e="";b.each(a,function(h,f){if(d=c.canPlaySrc(f)){e=f;return false}});return e},_setActive:function(){},_setInactive:function(){}},apis:{audio:{},video:{}},helper:{extractContainerCodecsFormType:function(a){a=a.split(/\s*;\s*/g);if(a[1]&&a[1].indexOf("codecs")!==-1)a[1]=
a[1].replace(/["|']$/,"").replace(/^\s*codecs=('|")/,"").split(/\s*,\s*/g);return a},makeAbsURI:function(){return function(a){if(a&&typeof a==="string")a=b('<a href="'+a+'"></a>')[0].href;return a}}(),beget:function(a){var c=function(){};c.prototype=a;return new c},_create:function(a,c,d,e){var h=b.data(d,"mediaElemSupport")||b.data(d,"mediaElemSupport",{apis:{},nodeName:a});if(!h.apis[c]){h.apis[c]=j.helper.beget(j.apis[a][c]);h.apis[c].html5elem=d;h.apis[c].nodeName=a;h.apis[c].name=c;h.apis[c].data=
{};h.apis[c].embedOpts=e}return h},_setAPIActive:function(a,c){var d=b.data(a,"mediaElemSupport"),e=d.name;if(e===c)return true;var h=d.apis[e].apiElem,f=d.apis[c]&&d.apis[c].apiElem,g=false;if(f&&f.nodeName){if(d.nodeName!=="audio"||b.attr(a,"controls")){f.style.display="";c!=="nativ"&&d.apis[c].visualElem.css({width:b(d.apis[c].html5elem).width(),height:b(d.apis[c].html5elem).height(),visibility:""})}d.apis[c]._setActive(e);g=true}if(h&&h.nodeName){if(e==="nativ")h.style.display="none";else d.apis[e].visualElem.css({height:0,
width:0,overflow:"hidden",visibility:"hidden"});d.apis[e]._setInactive(c)}d.name=c;return g}},getSuitedPlayers:function(a,c){var d=b.data(a,"mediaElemSupport");if(d&&d.apis){d=d.apis;var e=b.attr(a,"srces"),h=false,f=function(g,i){if(!(!i.isTechAvailable||b.isFunction(i.isTechAvailable)&&!i.isTechAvailable())){if(i=i.canPlaySrces(e))h={src:i.src||i,name:g};return h}};if(!e.length)return"noSource";c?b.each(c,function(g,i){return!f(i,d[i])}):b.each(d,function(g,i){return!f(g,i)});return h}},_embedApi:function(a,
c,d){var e=b.attr(a,"getConfig"),h=b(a),f=a.id;if(!f){m++;f=d.nodeName+"-"+m;a.id=f}d.apis[c.name].visualElem=b('<div class="media-element-box mm-'+d.nodeName+'-box" />').insertAfter(a);d.nodeName==="audio"&&!e.controls?d.apis[c.name].visualElem.css({height:0,width:0,overflow:"hidden"}):d.apis[c.name].visualElem.css({width:h.width(),height:h.height()});d.apis[c.name]._embed(c.src,d.name+"-"+f,e,function(g){d.apis[c.name].apiElem=g;b(g).addClass(d.nodeName);d.apis[c.name]._init()})},getPluginVersion:function(a){var c=
navigator.plugins&&navigator.plugins[a];a=-1;if(c)if((c=(c.description||"").match(/(\d+\.\d+)/)||["0"])&&c[0])a=parseFloat(c[0],10);return a},embedObject:function(a,c,d,e,h){a=b("<div />").appendTo(a)[0];var f;if(!window.ActiveXObject||!a.outerHTML){f=t.createElement("object");b.each(d,function(g,i){f.setAttribute(g,i)});b.each(e,function(g,i){var l=t.createElement("param");l.setAttribute("name",g);l.setAttribute("value",i);f.appendChild(l)});f.setAttribute("id",c);f.setAttribute("name",c);a.parentNode.replaceChild(f,
a)}else{f="<object";b.each(b.extend({},d,h),function(g,i){f+=" "+g+'="'+i+'"'});f+=' name="'+c+'"';f+=' id="'+c+'"';f+=">";b.each(e,function(g,i){f+=' <param name="'+g+'" value="'+i+'" />'});f+="</object>";a.outerHTML=f;f=t.getElementById(c)}if(f){f.setAttribute("width","100%");f.setAttribute("height","100%");f.style.display.width="100%";f.style.display.height="100%"}b(window).unload(function(){jQuery.cleanData([f]);f=null});return f}});j.add("nativ","video",{});j.add("nativ","audio",{});b.fn.mediaElementEmbed=
function(a){a=b.extend(true,{},b.fn.mediaElementEmbed.defaults,a);return this.each(function(){var c=this.nodeName.toLowerCase();if(!(c!=="video"&&c!=="audio")){var d=this;a.removeControls&&b.attr(this,"controls",false);var e=j.helper._create(c,"nativ",this,a);e.name="nativ";e.apis.nativ.apiElem=this;e.apis.nativ.visualElem=b(this);b.each(j.apis[c],function(h){h!=="nativ"&&j.helper._create(c,h,d,a)});a.debug||!b.support.mediaElements||this.error?s(this,a):e.apis[e.name]._init();b(this).bind("mediaerror",
function(){e.name==="nativ"&&s(this,a)}).bind("loadedmetadata",k)}})};b.fn.mediaElementEmbed.defaults={debug:false,removeControls:false,apiOrder:[]};if(b.cleanData){var y=b.cleanData;b.cleanData=function(a){y(a);for(var c=0,d=a.length;c<d;c++)if(a[c].nodeName==="OBJECT")try{for(var e in a[c])if(typeof a[c][e]==="function")a[c][e]=null}catch(h){}}}})(jQuery);
(function(b){b.extend(b.fn.mediaElementEmbed.defaults,{jwPlayer:{path:"player.swf",vars:{},attrs:{},params:{allowscriptaccess:"always",allowfullscreen:"true"}}});var o={type:"application/x-shockwave-flash"},q={classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},r=b.multimediaSupport,s={isTechAvailable:function(){if(b.support.flash9!==undefined)return b.support.flash9;b.support.flash9=false;var k=r.getPluginVersion("Shockwave Flash");if(k>=9)b.support.flash9=true;else if(window.ActiveXObject)try{k=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(!k)return;if((k=k.GetVariable("$version").match(/(\d+\,\d+)/))&&k[0])if(parseFloat(k[0].replace(",","."),10)>=9)b.support.flash9=true}catch(j){}return b.support.flash9},_embed:function(k,j,m,t){var n=this.embedOpts.jwPlayer;k=b.extend({},n.vars,{file:k,id:j});var v=b.extend({name:j,data:n.path},n.attrs,o),p=b.extend({movie:n.path},n.params);if(m.poster)k.image=m.poster;k.autostart=""+m.autoplay;k.repeat=m.loop?"single":"false";k.controlbar=m.controls?
"bottom":"none";if((n.playFirstFrame||m.autobuffer)&&!m.poster&&!m.autoplay){this.data.playFirstFrame=true;k.autostart="true"}p.flashvars=[];b.each(k,function(w,x){p.flashvars.push(w+"="+x)});p.flashvars=p.flashvars.join("&");t(r.embedObject(this.visualElem[0],j,v,p,q))},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E","avc1.4D401E","avc1.64001E"],canPlayContainer:["video/x-msvideo","video/quicktime","video/x-m4v","video/mp4","video/m4p","video/x-flv","video/flv","audio/mpeg","audio/mp3","audio/x-fla",
"audio/fla"]};r.add("jwPlayer","video",s);r.add("jwPlayer","audio",s)})(jQuery);
(function(b){b.extend(b.fn.mediaElementEmbed.defaults,{vlc:{params:{},attrs:{}}});var o=b.multimediaSupport,q={pluginspage:"http://www.videolan.org",version:"VideoLAN.VLCPlugin.2",progid:"VideoLAN.VLCPlugin.2",events:"true",type:"application/x-vlc-plugin"},r={classid:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"},s={isTechAvailable:function(){if(b.support.vlc!==undefined)return b.support.vlc;b.support.vlc=false;if(o.getPluginVersion("VLC Multimedia Plug-in")>=0.9)b.support.vlc=true;else if(window.ActiveXObject)try{if(new ActiveXObject("VideoLAN.VLCPlugin.2"))b.support.vlc=
true}catch(k){}return b.support.vlc},_embed:function(k,j,m,t){var n=this.embedOpts.vlc,v=b.extend({},n.attrs,{width:"100%",height:"100%",src:k},q);m=b.extend({},n.params,{src:k,showdisplay:"true",autoplay:""+m.autoplay,autoloop:""+m.loop});j=o.embedObject(this.visualElem[0],j,v,m,r);this._currentSrc=k;t(j)},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E","avc1.4D401E","avc1.64001E","theora","vorbis"],canPlayContainer:["video/x-msvideo","video/quicktime","video/x-m4v","video/mp4","video/m4p",
"video/x-flv","video/flv","audio/mpeg","audio/x-fla","audio/fla","video/ogg","video/x-ogg","audio/x-ogg","audio/ogg","application/ogg","application/x-ogg"]};o.add("vlc","video",s);o.add("vlc","audio",s)})(jQuery);
