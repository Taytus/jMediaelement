/**!
 * Part of the jMediaelement-Project v1.3.3 | http://github.com/aFarkas/jMediaelement
 * @author Alexander Farkas
 * Copyright 2010, Alexander Farkas
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(b){function z(){b.event.special.mediaerror.handler.apply(b(this).closest("video, audio")[0],arguments)}function D(a){if(b.support.mediaElements){var c=b.data(this,"mediaElemSupport");if(c&&c.apis){a&&a.type&&b.data(this,"calledMediaError",false);c=c.apis;a=this;var d=b.attr(this,"srces");if(a.error||d.length&&!c.nativ.canPlaySrces(d)){b.event.special.mediaerror.handler.call(this,b.Event("mediaerror"));try{a.pause()}catch(e){}}b("source",this).unbind("error",z).filter(":last").bind("error",
z)}}}function r(a,c){var d=a.nodeName.toLowerCase();c=j.getSuitedPlayers(a,c.apiOrder);var e=b.data(a,"mediaElemSupport");if(c)if(c==="noSource")e.noSource=true;else if(j._setAPIActive(a,c.name))e.apis[c.name]._mmload&&e.apis[c.name]._mmload(c.src,b.attr(a,"poster"));else j._embedApi(a,c,e,d);else{e.apis.nativ._trigger({type:"totalerror"});try{a.pause()}catch(f){}}}b.multimediaSupport={};var j=b.multimediaSupport,A=(new Date).getTime(),u=document,v=b("<video />")[0],i=!("webkitPreservesPitch"in v&&
parseFloat(b.browser.version,10)<534.7&&(navigator.userAgent.indexOf("Chrome")!==-1||navigator.userAgent.indexOf("Mac")===-1));b.support.video=!!v.canPlayType;b.support.autoBuffer=!!("autobuffer"in v);b.support.audio=!!b("<audio />")[0].canPlayType;v=null;b("<source />");b("<track />");b.support.mediaElements=b.support.video&&b.support.audio;b.support.dynamicHTML5=!!b("<video><div></div></video>")[0].innerHTML;b.support.mediaLoop="loop"in b("<video />")[0];b.browser.deprecatedPoster=!i;b.fixHTML5=
function(){var a,c;return b.support.dynamicHTML5?function(d){return d}:function(d){if(!a){c=document.body;a=document.createElement("div");a.style.display="none"}var e=a.cloneNode(false);c.appendChild(e);e.innerHTML=d;c.removeChild(e);return e.childNodes}}();var m={left:"0px",position:"absolute",visibility:"hidden",display:"block"},l=function(a,c){var d=c.parentNode;c=document.body;for(var e={width:0,height:0};d&&d!==c;){if(b.curCSS(d,"display")==="none"){b.swap(d,m,function(){var f=false;if(b.curCSS(d,
"display",true)==="none"){d.style.display="";f=b.attr(d,"style");b.attr(d,"style",f+"; display: block !important;")}e.height=a.innerHeight();e.width=a.innerWidth();if(!e.width&&!e.height)e=l(a,d);f!==false&&b.attr(d,"style",f)});if(e.width||e.height)break}d=d.parentNode}return e},n=["float"];b.each(["Top","Left","Right","Bottom"],function(a,c){n.push("margin"+c);n.push("padding"+c);n.push("border"+c+"Width");setTimeout(function(){j._transferStyles.push("border"+c+"Color");j._transferStyles.push("border"+
c+"Style")},1)});b.fn.getDimensions=function(){var a={width:0,height:0};if(this[0]){var c=this,d=this[0].style;a.height=d.height;a.width=d.width;b.each(n,function(e,f){a[f]=d[f]||c.css(f)});if(!a.width||!a.height||a.height=="auto"||a.width=="auto"){a.height=this.innerHeight();a.width=this.innerWidth();if(!a.width&&!a.height)a=l(this,this[0])}}return a};var s=b.attr,q=/video|audio|source/i,w={src:1,poster:1},o={loop:1,autoplay:1,controls:1},B={srces:1,getConfig:1,preload:1},x={auto:1,metadata:1,none:1},
p={change:function(a,c,d){if(b.support.mediaElements){var e=a.getAttribute("preload")||"metadata3";if(d||c!==e)if(i){if(b.support.autoBuffer)a.autobuffer=c==="auto"}else if(c==="none"||e==="none"&&(c==="auto"||!a.getAttribute("poster"))){b(a).unbind("play",p.changePlayMode);c==="none"&&b(a).bind("play",p.changePlayMode);b.attr(a,"srces",b.attr(a,"srces"),c)}}},changeAutoplay:function(a,c){if(b.support.mediaElements&&!i&&b.attr(a,"preload")==="none"&&c!==b.attr(a,"autoplay")){var d=b.attr(a,"srces");
b.attr(a,"srces",d,"auto");d.length&&c&&setTimeout(function(){a.play&&b(a).getMediaAPI()==="nativ"&&a.play()},9)}},changePlayMode:function(){p.changeAutoplay(this,true)},addSrces:function(a,c,d){if(i||!b.support.mediaElements)return false;d=d||b.attr(a,"preload");b(a).unbind("play",p.changePlayMode);if(d==="auto"||b.attr(a,"autoplay"))return b.data(a,"jme-srces",false);b(a).bind("play",p.changePlayMode);b.data(a,"jme-srces",c);return true}};b.attr=function(a,c,d,e){if(!(a.nodeName&&q.test(a.nodeName)&&
(B[c]||o[c]||w[c])))return s(a,c,d,e);var f;if(d===undefined){if(o[c])return typeof a[c]==="boolean"?a[c]:!!(a.attributes[c]||{}).specified;if(w[c])return b.support.video&&a[c]||j.makeAbsURI(a.getAttribute(c));switch(c){case "srces":if(f=b.data(a,"jme-srces"))break;if(f=b.attr(a,"src"))f=[{src:f,type:a.getAttribute("type"),media:a.getAttribute("media")}];else{f=[];b("source",a).each(function(){f.push({src:b.attr(this,"src"),type:this.getAttribute("type"),media:this.getAttribute("media")})});f.length||
b("a.source",a).each(function(){f.push({src:this.href,type:this.getAttribute("type"),media:this.getAttribute("data-media")})})}break;case "getConfig":f={};b.each(["autoplay","loop","controls","poster","preload"],function(g,h){f[h]=b.attr(a,h)});break;case "preload":f=a.preload||a.getAttribute("preload");if(f==="")f="auto";x[f]||(f="metadata");break}return f}else if(o[c]){d=!!d;a[c]=d;c==="autoplay"&&p.changeAutoplay(a,d);if(d){a[c]=d;a.setAttribute(c,c)}else{a[c]=d;a.removeAttribute(c)}}else if(w[c])a.setAttribute(c,
d);else if(c==="srces"){b("source, a.source",a).remove();a.removeAttribute("src");d=b.isArray(d)?d:[d];p.addSrces(a,d,e)||b.each(d,function(g,h){f=u.createElement("source");if(typeof h==="string")h={src:h};f.setAttribute("src",h.src);h.type&&f.setAttribute("type",h.type);h.media&&f.setAttribute("media",h.media);a.appendChild(f)})}else if(c==="getConfig")b.each(d,function(g,h){b.attr(a,g,h)});else if(c==="preload"){if(d==="")d="auto";else x[d]||(d="metadata");p.change(a,d,e);a.setAttribute(c,d)}};
b.event.special.mediaerror={setup:function(){var a=b(this).bind("error",b.event.special.mediaerror.handler).bind("native_mediareset",D);setTimeout(function(){a.each(D)},0)},teardown:function(){b(this).unbind("error",b.event.special.mediaerror.handler).find("source").unbind("error",z)},handler:function(a){if(!b.data(this,"calledMediaError")){a=b.extend({},a||{},{type:"mediaerror"});b.data(this,"calledMediaError",true);return b.event.handle.apply(this,arguments)}}};j.getExt=function(a){var c=a.indexOf("?"),
d="";a=c>0?a.substring(0,c):a;c=a.lastIndexOf(".")+1;return(d=a.substr(c))&&d.toLowerCase?d.toLowerCase():d};var C=j.getExt,y={audio:{"audio/ogg":["ogg","oga","ogm"],"audio/mpeg":["mp2","mp3","mpga","mpega"],"audio/mp4":["mp4","mpg4","m4r"],"audio/wav":["wav"],"audio/x-m4a":["m4a"],"audio/x-m4p":["m4p"],"audio/3gpp":["3gp","3gpp"],"audio/webm":["webm"]},video:{"video/ogg":["ogg","ogv","ogm"],"video/mpeg":["mpg","mpeg","mpe"],"video/mp4":["mp4","mpg4","m4v"],"video/quicktime":["mov","qt"],"video/x-msvideo":["avi"],
"video/x-ms-asf":["asf","asx"],"video/flv":["flv","f4v"],"video/3gpp":["3gp","3gpp"],"video/webm":["webm"]}};b.extend(j,{jsPath:function(){var a=b("script");a=a[a.length-1].src.split("?")[0];return a.slice(0,a.lastIndexOf("/")+1)}(),extendWithData:function(){var a={string:1,number:1,"boolean":1};return function(c,d,e){e||(e=d);b.each(e,b.isArray(e)?function(f,g){j.getData(c,g,d)}:function(f,g){a[typeof g]&&j.getData(c,f,d)});return d}}(),getData:function(){var a=function(c,d){c=c.getAttribute("data-"+
d);if(!(!c&&c!==""))return c*1==c?parseFloat(c,10):c==="false"?false:c==="true"?true:c};return function(c,d,e){var f=d;e=e||{};if(typeof d==="string")d=[f];b.each(d,b.isArray(d)?function(g,h){g=a(c,h);if(g!==undefined)e[h]=g}:function(g){var h=a(c,g);if(h!==undefined)e[g]=h});return e}}(),registerMimetype:function(a,c){arguments.length===1?b.each(y,function(d){j.registerMimetype(d,a)}):b.each(c,function(d,e){if(y[a][d])y[a][d]=[];y[a][d]=y[a][d].concat(e)})},_showMimeTypes:function(){window.console&&
console.log(y)},add:function(a,c,d){if(!this.apis[c][a]){this.apis[c][a]=j.beget(this.fn);a!=="nativ"&&b.inArray(a,b.fn.jmeEmbed.defaults.apiOrder)===-1&&b.fn.jmeEmbed.defaults.apiOrder.push(a)}b.extend(true,this.apis[c][a],d)},fn:{_init:b.noop,canPlayType:function(a){var c=this.apiElem,d;if(c&&c.canPlayType){d=c.canPlayType(a);return d==="no"?"":d}a=j.extractContainerCodecsFormType(a);var e=this;d="probably";if(!a[1])return this.canPlayContainer&&b.inArray(a[0],this.canPlayContainer)!==-1?"maybe":
"";b.each(a[1],function(f,g){if(!e.canPlayCodecs||b.inArray(g,e.canPlayCodecs)===-1){d="";return false}});return d},canPlaySrc:function(a){var c=this;if(typeof a!=="string"){if(a.type)return this.canPlayType(a.type);a=a.src}var d=C(a),e="";b.each(y[this.nodeName],function(f,g){if(b.inArray(d,g)!==-1){e=c.canPlayType(f);return false}});return e},canPlaySrces:function(a){a=a||b.attr(this.element,"srces");b.isArray(a)||(a=[a]);var c=this,d=false,e="";b.each(a,function(f,g){if(d=c.canPlaySrc(g)){e=g;
return false}});return e},_setActive:b.noop,_setInactive:b.noop,_trigger:function(a){b(this.element).triggerHandler(a,a)}},apis:{audio:{},video:{}},extractContainerCodecsFormType:function(a){a=a.split(/\s*;\s*/g);if(a[1]&&a[1].indexOf("codecs")!==-1)a[1]=a[1].replace(/["|']$/,"").replace(/^\s*codecs=('|")/,"").split(/\s*,\s*/g);return a},makeAbsURI:function(){return function(a){if(a&&typeof a==="string")a=b('<a href="'+a+'"></a>')[0].href;return a}}(),beget:function(a){var c=function(){};c.prototype=
a;return new c},_create:function(a,c,d,e){var f=b.data(d,"mediaElemSupport")||b.data(d,"mediaElemSupport",{apis:{},nodeName:a});if(!f.apis[c]){f.apis[c]=j.beget(j.apis[a][c]);f.apis[c].element=d;f.apis[c].nodeName=a;f.apis[c].name=c;f.apis[c].data={};f.apis[c].embedOpts=e}return f},_transferStyles:["backgroundColor","backgroundPosition","backgroundImage","backgroundRepeat","background-attachment"],_setAPIActive:function(a,c){var d=b.data(a,"mediaElemSupport"),e=d.name;if(e===c)return true;var f=d.apis[e].apiElem,
g=d.apis[c]&&d.apis[c].apiElem,h=false;if(g&&g.nodeName){if(d.nodeName!=="audio"||b.attr(a,"controls"))c==="nativ"?d.apis[c].visualElem.css({display:""}):d.apis[c].visualElem.css(b.extend({visibility:""},d.apis[e].visualElem.getDimensions()));d.apis[c]._setActive(e);h=true;d.apis[c]._trigger({type:"apiActivated",api:c});if(d.apis[e]){d.apis[e]._volumelevelState!==undefined&&b(a).volumelevel(d.apis[e]._volumelevelState);d.apis[e]._muteState!==undefined&&b(a).muted(d.apis[e]._muteState);d.apis[e].visualElem&&
b.each(j._transferStyles,function(k,t){d.apis[c].visualElem.css(t,d.apis[e].visualElem.css(t))})}}d.apis[c].isAPIActive=true;if(f&&f.nodeName){if(e==="nativ")f.style.display="none";else d.apis[e].visualElem.css({height:0,width:0,visibility:"hidden"});d.apis[e]._setInactive(c);d.apis[e].isAPIActive=false;d.apis[c]._trigger({type:"apiDeActivated",api:e})}d.name=c;return h},getSuitedPlayers:function(a,c){var d=b.data(a,"mediaElemSupport");if(d&&d.apis){d=d.apis;var e=b.attr(a,"srces"),f=false,g=function(h,
k){if(!(typeof k.isTechAvailable==="boolean"&&!k.isTechAvailable||b.isFunction(k.isTechAvailable)&&!k.isTechAvailable())){if(k=k.canPlaySrces(e))f={src:k.src||k,name:h};return f}};if(!e.length)return"noSource";c?b.each(c,function(h,k){return!g(k,d[k])}):b.each(d,function(h,k){return!g(h,k)});return f}},_embedApi:function(a,c,d){var e=b.attr(a,"getConfig"),f=b(a),g=a.id,h=f.attr("aria-labelledby");if(!g){A++;g=d.nodeName+"-"+A;a.id=g}d.apis[c.name].visualElem=b('<div class="media-element-box mm-'+
d.nodeName+'-box" style="position: relative;" />').insertBefore(a);h&&d.apis[c.name].visualElem.attr({role:"group","aria-labelledby":h});if(d.nodeName==="audio"&&!e.controls)d.apis[c.name].visualElem.css({height:0,width:0});else{d.apis[c.name].visualElem.css(f.getDimensions());b.each(j._transferStyles,function(k,t){d.apis[c.name].visualElem.css(t,f.css(t))})}d.apis[c.name]._embed(c.src,d.name+"-"+g,e,function(k){d.apis[c.name].apiElem=k;b(k).addClass(d.nodeName);e.controls||b(k).attr({tabindex:"-1",
role:"presentation"});d.apis[c.name]._init();d.apis[c.name]._trigger({type:"apiActivated",api:c.name})})},getPluginVersion:function(a,c){c=c||navigator.plugins&&navigator.plugins[a];a=[-1,0];if(c)if((c=(c.description||"").replace(/,/g,".").match(/(\d+)/g)||["0"])&&c[0]){a[0]=c[0];if(c[1])a[0]+="."+c[1];a[0]=parseFloat(a[0],10);if(c[2])a[1]=parseInt(c[2],10)}return a},embedObject:function(a,c,d,e,f){a.style.overflow="hidden";a=b("<div />").prependTo(a)[0];var g;if(navigator.plugins&&navigator.plugins.length){g=
u.createElement("object");b.each(d,function(h,k){g.setAttribute(h,k)});b.each(e,function(h,k){var t=u.createElement("param");t.setAttribute("name",h);t.setAttribute("value",k);g.appendChild(t)});g.setAttribute("id",c);g.setAttribute("name",c);if(e.wmode==="transparent"){g.style.minHeight="1px";g.style.minHeight="1px"}a.parentNode.replaceChild(g,a)}else if(window.ActiveXObject){g='<object style="width: 100%; height: 100%; width="100%" height="100%"';b.each(b.extend({},d,f),function(h,k){g+=" "+h+'="'+
k+'"'});g+=' name="'+c+'"';g+=' id="'+c+'"';g+=">";b.each(e,function(h,k){g+=' <param name="'+h+'" value="'+k+'" />'});g+="</object>";a.outerHTML=g;g=u.getElementById(c)}if(g){g.setAttribute("width","100%");g.setAttribute("height","100%")}b(window).unload(function(){jQuery.cleanData([g]);g=null});setTimeout(function(){if(g&&g.style){g.style.width="100%";g.style.height="100%"}},0);return g}});j.add("nativ","video",{});j.add("nativ","audio",{});var E=function(){var a=b(this).hide().children(":not(source, track)").clone().insertAfter(this);
b(this).one("mediareset",function(){b(this).show();a.remove()})};b.fn.jmeEmbed=function(a){a=b.extend(true,{},b.fn.jmeEmbed.defaults,a);a.showFallback&&b.support.mediaElements&&this.bind("totalerror",E);return this.each(function(){var c=this.nodeName.toLowerCase(),d=false,e=this;if(!(c!=="video"&&c!=="audio"||b.support.flash9&&b.nodeName(e.parentNode,"object"))){b("object, embed",this).each(function(){b("> *:not(param, embed, object)",this).appendTo(e)}).remove();b(this).trigger("jmeBeforeEmbed",
{options:a,nodeName:c});a.removeControls&&b.attr(this,"controls",false);var f=j._create(c,"nativ",this,a);f.name="nativ";f.apis.nativ.apiElem=this;f.apis.nativ.visualElem=b(this);f.apis.nativ.isAPIActive=true;b.each(j.apis[c],function(g){g!=="nativ"&&j._create(c,g,e,a)});b(this).bind("mediaerror",function(){f.name==="nativ"&&r(this,a)});if(b.support.flash9&&a.activateFlash){d=j.getSuitedPlayers(e,["jwPlayer"]);if(d=="noSource")d={name:"jwPlayer"};f.apis.nativ.isAPIReady=true;if(d.name=="jwPlayer"&&
!j._setAPIActive(this,"jwPlayer"))j._embedApi(this,d,f,c);else d=false}if(!d)if(a.debug||!b.support.mediaElements){r(this,a);f.apis.nativ.isAPIReady=true}else f.apis.nativ._init();b.attr(this,"preload",b.attr(this,"preload"),true);b(this).trigger("jmeEmbed",{options:a,nodeName:c,data:f})}})};b.fn.jmeEmbed.defaults={debug:false,removeControls:false,showFallback:false,apiOrder:[],activateFlash:false};b.fn.mediaElementEmbed=b.fn.jmeEmbed;if(b.cleanData&&window.ActiveXObject){var F=b.cleanData;b.cleanData=
function(a){F(a);for(var c=0,d=a.length;c<d;c++)if(a[c].nodeName==="OBJECT")try{for(var e in a[c])if(typeof a[c][e]==="function")a[c][e]=null}catch(f){}}}})(jQuery);
(function(b){var z={type:"application/x-shockwave-flash"},D={classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},r=b.multimediaSupport;b.extend(b.fn.jmeEmbed.defaults,{jwPlayer:{path:r.jsPath+"player.swf",hideIcons:"auto",vars:{},attrs:{},plugins:{},params:{allowscriptaccess:"always",allowfullscreen:"true"}}});b(function(){var i=(b("script.jwPlayer")[0]||{}).src;if(i)b.fn.jmeEmbed.defaults.jwPlayer.path=i});var j={A:/&amp;/g,a:/&/g,e:/\=/g,q:/\?/g},A={audio:"sound",video:"video"},u=function(i){return i.replace?
i.replace(j.A,"%26").replace(j.a,"%26").replace(j.e,"%3D").replace(j.q,"%3F"):i};(function(){b.support.flash9=false;b.support.flashVersion=0;var i=r.getPluginVersion("Shockwave Flash"),m=function(n){b.support.flash9=false;try{if(n&&typeof n.GetVariable!=="undefined"){var s=n.GetVariable("$version");n=r.getPluginVersion("",{description:s});b.support.flashVersion=n[0];b.support.flash9=!!(n[0]>9||n[0]===9&&n[1]>=115)}}catch(q){}};if(i&&i[0])b.support.flashVersion=i[0];if(i[0]>9||i[0]===9&&i[1]>=115){b.support.flash9=
true;b(function(){i=b("<object />",z).appendTo("body");m(i[0]);i.remove()})}else if(window.ActiveXObject)try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");m(i);i=null}catch(l){}})();var v={isTechAvailable:function(){return b.support.flash9},_extendJWLoad:function(i,m,l){if(i){l=l||this.element;r.extendWithData(l,m,["type","provider","stretching","bufferlength"]);l=r.getExt(i);var n=l=="m4r"?"video":this.nodeName;if(l=="m4r"||!this.canPlaySrc(i)){if(!m.provider)m.provider=A[n];if(!m.type)m.type=
A[n]}return m}},_embed:function(i,m,l,n){var s=this.embedOpts.jwPlayer,q=b.extend({},s.vars,{file:i,id:m}),w=b.extend({name:m},s.attrs,z,!window.ActiveXObject?{data:s.path}:{}),o=b.extend({movie:s.path},s.params),B=[],x=this;this._extendJWLoad(i,q);if(l.poster)q.image=l.poster;q.autostart=""+l.autoplay;q.repeat=l.loop?"single":"false";q.controlbar=l.controls?"bottom":"none";if(!l.controls&&this.nodeName!=="audio"&&o.wmode===undefined)o.wmode="transparent";if(!l.controls&&s.hideIcons&&o.wmode==="transparent"||
s.hideIcons===true){q.icons="false";q.showicons="false"}if(o.wmode==="transparent"&&!q.screencolor&&!w.bgcolor){q.screencolor="ffffffff";w.bgcolor="#000000"}o.flashvars=[];b.each(q,function(p,C){o.flashvars.push(u(p)+"="+u(C))});b.each(s.plugins,function(p,C){B.push(C)});B.length&&o.flashvars.push("plugins="+B.join(","));o.flashvars=o.flashvars.join("&");n(r.embedObject(this.visualElem[0],m,w,o,D,"Shockwave Flash"));setTimeout(function(){var p=b("object",x.visualElem)[0];if(!p||p.style.display===
"none"&&b("> *",x.visualElem).length>1){b("div[bgactive]",x.visualElem).css({width:"100%",height:"100%"});x._trigger("flashblocker")}},9)},canPlaySrc:function(i){var m=r.fn.canPlaySrc.apply(this,arguments),l=-1;l=i.src||i;if(!m&&typeof l==="string"){l=l.indexOf("youtube.com/");if(l<15&&l>6)m="maybe"}return m},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E","avc1.4D401E","avc1.64001E","VP6","mp3","AAC"],canPlayContainer:["video/3gpp","video/x-msvideo","video/quicktime","video/x-m4v","video/mp4",
"video/m4p","video/x-flv","video/flv","audio/mpeg","audio/mp4","audio/mp3","audio/x-fla","audio/fla","youtube/flv","jwplayer/jwplayer"]};r.add("jwPlayer","video",v);r.add("jwPlayer","audio",v)})(jQuery);
