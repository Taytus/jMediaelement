/**!
 * Part of the jMediaelement-Project | http://github.com/aFarkas/jMediaelement
 * @author Alexander Farkas
 * Copyright 2010, Alexander Farkas
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(c){function s(){c.event.special.mediaerror.handler.apply(c(this).closest("video, audio")[0],arguments)}function v(a){if(c.support.mediaElements){var b=c.data(this,"mediaElemSupport");if(b&&b.apis){a&&a.type&&c.data(this,"calledMediaError",false);b=b.apis;a=this;var d=c.attr(this,"srces");if(a.error||d.length&&!b.nativ.canPlaySrces(d)){c.event.special.mediaerror.handler.call(this,c.Event("mediaerror"));try{a.pause()}catch(f){}}c("source",this).unbind("error",s).filter(":last").bind("error",
s)}}}function q(a){var b=a.indexOf("?")+1,d="";a=b?a.substring(0,b):a;b=a.lastIndexOf(".")+1;return d=a.substr(b)}function t(a,b){var d=a.nodeName.toLowerCase();b=g.getSuitedPlayers(a,b.apiOrder);var f=c.data(a,"mediaElemSupport");if(b){if(b!=="noSource")if(g._setAPIActive(a,b.name))f.apis[b.name]._mmload&&f.apis[b.name]._mmload(b.src,c.attr(a,"poster"));else g._embedApi(a,b,f,d)}else{f.apis.nativ._trigger({type:"totalerror"});try{a.pause()}catch(h){}}}c.multimediaSupport={};var g=c.multimediaSupport,
n=(new Date).getTime(),l=document;c.support.video=!!c("<video />")[0].canPlayType;c.support.audio=!!c("<audio />")[0].canPlayType;c.support.mediaElements=c.support.video&&c.support.audio;var m=c.attr,p=/video|audio|source/i,u={src:1,poster:1},o={loop:1,autoplay:1,controls:1},x={srces:1,getConfig:1,preload:1},w={auto:1,metadata:1,none:1};c.attr=function(a,b,d,f){if(!(a.nodeName&&p.test(a.nodeName)&&(x[b]||g.attrFns[b]||o[b]||u[b])))return m(a,b,d,f);var h=d!==undefined,j,e;if(g.attrFns[b])if(j=c.data(a,
"mediaElemSupport")){e=j.apis[j.name][b](d,f);if(!h)return e}else return m(a,b,d,f);if(h)if(o[b]){d=!!d;if(a[b]=d){a[b]=d;a.setAttribute(b,b)}else{a[b]=d;a.removeAttribute(b)}}else if(u[b])a.setAttribute(b,d);else if(b==="srces"){c("source, a.source",a).remove();a.removeAttribute("src");d=c.isArray(d)?d:[d];c.each(d,function(i,k){e=l.createElement("source");if(typeof k==="string")k={src:k};e.setAttribute("src",k.src);k.type&&e.setAttribute("type",k.type);k.media&&e.setAttribute("media",k.media);a.appendChild(e)})}else if(b===
"getConfig")c.each(d,function(i,k){c.attr(a,i,k)});else b==="preload"&&w[d]&&a.setAttribute(b,d);else{if(o[b])return typeof a[b]==="boolean"?a[b]:!!(a.attributes[b]||{}).specified;if(u[b])return c.support.video&&a[b]||g.makeAbsURI(a.getAttribute(b));switch(b){case "srces":if(e=c.attr(a,"src"))e=[{src:e,type:a.getAttribute("type"),media:a.getAttribute("media")}];else{e=[];c("source",a).each(function(){e.push({src:c.attr(this,"src"),type:this.getAttribute("type"),media:this.getAttribute("media")})});
e.length||c("a.source",a).each(function(){e.push({src:this.href,type:this.getAttribute("type"),media:this.getAttribute("data-media")})})}break;case "getConfig":e={};c.each(["autoplay","loop","controls","poster","preload"],function(i,k){e[k]=c.attr(a,k)});break;case "preload":e=a.getAttribute("preload");w[e]||(e="auto");break}return e}};c.event.special.mediaerror={setup:function(){var a=c(this).bind("error",c.event.special.mediaerror.handler).bind("native_mediareset",v);setTimeout(function(){a.each(v)},
0)},teardown:function(){c(this).unbind("error",c.event.special.mediaerror.handler).find("source").unbind("error",s)},handler:function(a){if(!c.data(this,"calledMediaError")){a=c.extend({},a||{},{type:"mediaerror"});c.data(this,"calledMediaError",true);return c.event.handle.apply(this,arguments)}}};var r={audio:{"application/ogg":["ogg","oga","ogm"],"audio/mpeg":["mp2","mp3","mpga","mpega"],"audio/mp4":["mp4","mpg4"],"audio/wav":["wav"],"audio/x-m4a":["m4a"],"audio/x-m4p":["m4p"],"audio/3gpp":["3gp",
"3gpp"]},video:{"application/ogg":["ogg","ogv","ogm"],"video/mpeg":["mpg","mpeg","mpe"],"video/mp4":["mp4","mpg4","m4v"],"video/quicktime":["mov","qt"],"video/x-msvideo":["avi"],"video/x-ms-asf":["asf","asx"],"video/flv":["flv","f4v"],"video/3gpp":["3gp","3gpp"]}};c.extend(g,{registerMimetype:function(a,b){arguments.length===1?c.each(r,function(d){g.registerMimetype(d,a)}):c.each(b,function(d,f){if(r[a][d])r[a][d]=[];r[a][d]=r[a][d].concat(f)})},_showMimeTypes:function(){window.console&&console.log(r)},
attrFns:{},add:function(a,b,d){if(!this.apis[b][a]){this.apis[b][a]=g.beget(this.fn);a!=="nativ"&&c.inArray(a,c.fn.mediaElementEmbed.defaults.apiOrder)===-1&&c.fn.mediaElementEmbed.defaults.apiOrder.push(a)}c.extend(true,this.apis[b][a],d)},fn:{_init:c.noop,canPlayType:function(a){var b=this.apiElem,d;if(b&&b.canPlayType){d=b.canPlayType(a);return d==="no"?"":d}a=g.extractContainerCodecsFormType(a);var f=this;d="probably";if(!a[1])return this.canPlayContainer&&c.inArray(a[0],this.canPlayContainer)!==
-1?"maybe":"";c.each(a[1],function(h,j){if(!f.canPlayCodecs||c.inArray(j,f.canPlayCodecs)===-1){d="";return false}});return d},canPlaySrc:function(a){var b=this;if(typeof a!=="string"){if(a.type)return this.canPlayType(a.type);a=a.src}var d=q(a),f="";c.each(r[this.nodeName],function(h,j){if(c.inArray(d,j)!==-1){f=b.canPlayType(h);return false}});return f},canPlaySrces:function(a){a=a||c.attr(this.element,"srces");c.isArray(a)||(a=[a]);var b=this,d=false,f="";c.each(a,function(h,j){if(d=b.canPlaySrc(j)){f=
j;return false}});return f},_setActive:c.noop,_setInactive:c.noop,_trigger:function(a){c(this.element).triggerHandler(a,a)}},apis:{audio:{},video:{}},extractContainerCodecsFormType:function(a){a=a.split(/\s*;\s*/g);if(a[1]&&a[1].indexOf("codecs")!==-1)a[1]=a[1].replace(/["|']$/,"").replace(/^\s*codecs=('|")/,"").split(/\s*,\s*/g);return a},makeAbsURI:function(){return function(a){if(a&&typeof a==="string")a=c('<a href="'+a+'"></a>')[0].href;return a}}(),beget:function(a){var b=function(){};b.prototype=
a;return new b},_create:function(a,b,d,f){var h=c.data(d,"mediaElemSupport")||c.data(d,"mediaElemSupport",{apis:{},nodeName:a});if(!h.apis[b]){h.apis[b]=g.beget(g.apis[a][b]);h.apis[b].element=d;h.apis[b].nodeName=a;h.apis[b].name=b;h.apis[b].data={};h.apis[b].embedOpts=f}return h},_setAPIActive:function(a,b){var d=c.data(a,"mediaElemSupport"),f=d.name;if(f===b)return true;var h=d.apis[f].apiElem,j=d.apis[b]&&d.apis[b].apiElem,e=false;if(j&&j.nodeName){if(d.nodeName!=="audio"||c.attr(a,"controls"))b===
"nativ"?d.apis[b].visualElem.css({display:""}):d.apis[b].visualElem.css({width:d.apis[f].visualElem.width(),height:d.apis[f].visualElem.height(),visibility:""});d.apis[b]._setActive(f);e=true;d.apis[b]._trigger({type:"apiActivated",api:b})}d.apis[b].isAPIActive=true;if(h&&h.nodeName){if(f==="nativ")h.style.display="none";else d.apis[f].visualElem.css({height:0,width:0,visibility:"hidden"});d.apis[f]._setInactive(b);d.apis[f].isAPIActive=false;d.apis[b]._trigger({type:"apiDeActivated",api:f})}d.name=
b;return e},getSuitedPlayers:function(a,b){var d=c.data(a,"mediaElemSupport");if(d&&d.apis){d=d.apis;var f=c.attr(a,"srces"),h=false,j=function(e,i){if(!(typeof i.isTechAvailable==="boolean"&&!i.isTechAvailable||c.isFunction(i.isTechAvailable)&&!i.isTechAvailable())){if(i=i.canPlaySrces(f))h={src:i.src||i,name:e};return h}};if(!f.length)return"noSource";b?c.each(b,function(e,i){return!j(i,d[i])}):c.each(d,function(e,i){return!j(e,i)});return h}},_embedApi:function(a,b,d){var f=c.attr(a,"getConfig"),
h=c(a),j=a.id;if(!j){n++;j=d.nodeName+"-"+n;a.id=j}d.apis[b.name].visualElem=c('<div class="media-element-box mm-'+d.nodeName+'-box" />').insertBefore(a);d.nodeName==="audio"&&!f.controls?d.apis[b.name].visualElem.css({height:0,width:0,overflow:"hidden"}):d.apis[b.name].visualElem.css({width:h.width(),height:h.height()});d.apis[b.name]._embed(b.src,d.name+"-"+j,f,function(e){d.apis[b.name].apiElem=e;c(e).addClass(d.nodeName);d.apis[b.name]._init();d.apis[b.name]._trigger({type:"apiActivated",api:b.name})})},
getPluginVersion:function(a,b){b=b||navigator.plugins&&navigator.plugins[a];a=[-1,0];if(b)if((b=(b.description||"").replace(/,/g,".").match(/(\d+)/g)||["0"])&&b[0]){a[0]=b[0];if(b[1])a[0]+="."+b[1];a[0]=parseFloat(a[0],10);if(b[2])a[1]=parseInt(b[2],10)}return a},embedObject:function(a,b,d,f,h,j){a=c("<div />").appendTo(a)[0];var e;if(navigator.plugins&&navigator.plugins[j]){e=l.createElement("object");c.each(d,function(i,k){e.setAttribute(i,k)});c.each(f,function(i,k){var y=l.createElement("param");
y.setAttribute("name",i);y.setAttribute("value",k);e.appendChild(y)});e.setAttribute("id",b);e.setAttribute("name",b);a.parentNode.replaceChild(e,a)}else if(window.ActiveXObject){e="<object";c.each(c.extend({},d,h),function(i,k){e+=" "+i+'="'+k+'"'});e+=' name="'+b+'"';e+=' id="'+b+'"';e+=">";c.each(f,function(i,k){e+=' <param name="'+i+'" value="'+k+'" />'});e+="</object>";a.outerHTML=e;e=l.getElementById(b)}if(e){e.setAttribute("width","100%");e.setAttribute("height","100%")}c(window).unload(function(){jQuery.cleanData([e]);
e=null});setTimeout(function(){if(e&&e.setAttribute){e.setAttribute("width","100%");e.setAttribute("height","100%")}},0);return e}});g.add("nativ","video",{});g.add("nativ","audio",{});c.fn.mediaElementEmbed=function(a){a=c.extend(true,{},c.fn.mediaElementEmbed.defaults,a);return this.each(function(){var b=this.nodeName.toLowerCase();if(!(b!=="video"&&b!=="audio")){var d=this;a.removeControls&&c.attr(this,"controls",false);var f=g._create(b,"nativ",this,a);f.name="nativ";f.apis.nativ.apiElem=this;
f.apis.nativ.visualElem=c(this);f.apis.nativ.isAPIActive=true;c.each(g.apis[b],function(h){h!=="nativ"&&g._create(b,h,d,a)});a.showFallback&&c.support.mediaElements&&c(this).bind("totalerror",function(){c(this).hide().children(":not(source, itext)").insertAfter(this)});if(a.debug||!c.support.mediaElements){t(this,a);f.apis.nativ.isAPIReady=true}else f.apis.nativ._init();c(this).bind("mediaerror",function(){f.name==="nativ"&&t(this,a)})}})};c.fn.mediaElementEmbed.defaults={debug:false,removeControls:false,
showFallback:false,apiOrder:[]};if(c.cleanData&&window.ActiveXObject){var z=c.cleanData;c.cleanData=function(a){z(a);for(var b=0,d=a.length;b<d;b++)if(a[b].nodeName==="OBJECT")try{for(var f in a[b])if(typeof a[b][f]==="function")a[b][f]=null}catch(h){}}}})(jQuery);
(function(c){c.extend(c.fn.mediaElementEmbed.defaults,{jwPlayer:{path:"player.swf",vars:{},attrs:{},params:{allowscriptaccess:"always",allowfullscreen:"true"}}});var s={type:"application/x-shockwave-flash"},v={classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},q=c.multimediaSupport;(function(){c.support.flash9=false;var g=q.getPluginVersion("Shockwave Flash"),n=function(m){c.support.flash9=false;try{m=q.getPluginVersion("",{description:m.GetVariable("$version")});c.support.flash9=!!(m[0]>9||m[0]===
9&&m[1]>=115)}catch(p){}};if(g[0]>9||g[0]===9&&g[1]>=115){c.support.flash9=true;c(function(){g=c("<object />",s).appendTo("body");n(g[0]);g.remove()})}else if(window.ActiveXObject)try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");n(g);g=null}catch(l){}})();var t={isTechAvailable:function(){return c.support.flash9},_embed:function(g,n,l,m){var p=this.embedOpts.jwPlayer;g=c.extend({},p.vars,{file:g,id:n});var u=c.extend({name:n,data:p.path},p.attrs,s),o=c.extend({movie:p.path},p.params);if(l.poster)g.image=
l.poster;g.autostart=""+l.autoplay;g.repeat=l.loop?"single":"false";g.controlbar=l.controls?"bottom":"none";o.flashvars=[];c.each(g,function(x,w){o.flashvars.push(x+"="+w)});o.flashvars=o.flashvars.join("&");m(q.embedObject(this.visualElem[0],n,u,o,v,"Shockwave Flash"))},canPlayCodecs:["avc1.42E01E","mp4a.40.2","avc1.58A01E","avc1.4D401E","avc1.64001E"],canPlayContainer:["video/3gpp","video/x-msvideo","video/quicktime","video/x-m4v","video/mp4","video/m4p","video/x-flv","video/flv","audio/mpeg","audio/mp3",
"audio/x-fla","audio/fla"]};q.add("jwPlayer","video",t);q.add("jwPlayer","audio",t)})(jQuery);
