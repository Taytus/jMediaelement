(function(a){a.webshims=a.webshims||{ready:function(a,d){d()},addReady:function(b){a(function(){b(document,a([]))})}};var n=a.webshims;if(!window.Modernizr||!("opacity"in Modernizr))a("html").addClass(a.support.opacity?"opacity":"no-opacity");if(!a.fn.callProp)a.fn.callProp=function(b,d){var g;d||(d=[]);this.each(function(){var i=a.prop(this,b);if(i&&i.apply&&(g=i.apply(this,d),void 0!==g))return!1});return void 0!==g?g:this};var l={},o={};a.jme={version:"2.0.0",classNS:"",options:{},plugins:{},data:function(b,
d,g){b=a(b).data(h+"jme")||a.data(b,h+"jme",{});if(void 0===g)return d?b[d]:b;b[d]=g},registerPlugin:function(a,d){this.plugins[a]=d;if(!d.nodeName)d.nodeName="";if(!d.className)d.className=a},defineMethod:function(a,d){o[a]=d},defineProp:function(b,d){if(!d.set)d.set=d.readonly?function(){throw b+" is readonly";}:a.noop;if(!d.get)d.get=function(d){return a.jme.data(d,b)};l[b]=d},prop:function(b,d,g){if(!l[d])return a.prop(b,d,g);if(void 0===g)return l[d].get(b);var i=l[d].set(b,g);void 0===i&&(i=
g);"noDataSet"!=i&&a.jme.data(b,d,i)}};a.fn.jmeProp=function(b,d){return a.access(this,b,d,!0,a.jme.prop)};a.fn.jmeFn=function(a){var d=Array.prototype.slice.call(arguments,1),g;this.each(function(){g=o[a].apply(this,d);if(void 0!==g)return!1});return void 0!==g?g:this};var m,k=[],h="",c=function(){if(!m)h=a.jme.classNS,m="div."+h+"mediaplayer",a.each(a.jme.plugins,function(b,d){d.className=h+d.className;d.selector=d.nodeName+"."+d.className;k.push(d.selector);h&&d.pseudoClasses&&a.each(d.pseudoClasses,
function(a,b){d.pseudoClasses[a]=h+b})}),k=k.join(",")},f={emptied:1,pause:1};a.jme.getDOMList=function(b){var d=[];b||(b=[]);"string"==typeof b&&(b=b.split(" "));a.each(b,function(a,b){b&&(b=document.getElementById(b))&&d.push(b)});return d};a.jme.getButtonText=function(b,d){var g=a("span.jme-text",b);g[0]||(g=b);var i=g.text().split("/"),c=b.prop("title").split("/"),e,f,h;2==i.length&&(i[0]=i[0].trim(),i[1]=i[1].trim(),e=!0);2==c.length&&(c[0]=c[0].trim(),c[1]=c[1].trim(),f=!0);return function(a){h!==
a&&(h=a,e&&g.text(i[a||0]),f&&b.prop("title",i[a||0]),d&&b.removeClass(d[a?0:1]).addClass(d[a]))}};a.jme.timedClass={add:function(b,d,g){a.jme.timedClass.remove(b,d);b=a(b);g||(g=20);var c=a.data(b[0],"timedClass"+d,{i:0,timer:setInterval(function(){b.removeClass(d+"-"+c.i);c.i++;if(c.i>g)c.i=0;b.addClass(d+"-"+c.i)},25)})},remove:function(b,d){var b=a(b),c=a.data(b[0],"timedClass"+d);c&&(b.removeClass(d+"-"+c.i),clearInterval(c.timer),a.removeData(b[0],"timedClass"+d))}};a.fn.jmePlayer=function(b){var d=
["idle","playing","ended","waiting","mediaerror"].map(function(a){return h+"state-"+a}).join(" ");return this.each(function(){b&&a.jme.data(this,a.extend(!0,{},b));var c=a("audio, video",this).filter(":first"),e=a(this),q=a(k,e),j=a.jme.getDOMList(a.jme.data(this,"controls")),q=q.add(a(j)),j=a.jme.data(this),t=a.jme.data(c[0]),p;t.player=e;t.media=c;if(!j.media){p=!0;j.media=c;j.player=e;c.bind("emptied waiting playing ended pause updateJMEState mediaerror",function(b){var b=b.type,c;"updateJMEState"==
b&&(a.prop(this,"ended")?b="ended":(b=a.prop(this,"readyState"),c=a.prop(this,"paused"),b=!c&&3>b?"waiting":!c&&2<b?"playing":"idle"));f[b]&&(b="idle");"waiting"==b?a.jme.timedClass.add(e,h+"state-"+b):a.jme.timedClass.remove(e,h+"state-"+b);e.removeClass(d).addClass(h+"state-"+b)}).bind("volumechange updateJMEState",function(){e[a.prop(this,"muted")?"addClass":"removeClass"](h+"state-muted")}).bind("emptied updateJMEState play playing waiting",function(b){var d;"emptied"==b.type?d="addClass":"play"==
b.type||"waiting"==b.type||"playing"==b.type?d="removeClass":a.prop(this,"paused")&&(d="addClass");e[d](h+"state-initial")}).triggerHandler("updateJMEState");var r,s;e.bind("useractive",function(){e.addClass(h+"useractive")}).bind("userinactive",{idletime:3500},function(){e.removeClass(h+"useractive")}).bind("focusin",function(){clearTimeout(r);e.addClass(h+"focusenter")}).bind("focusout",function(){clearTimeout(r);r=setTimeout(function(){e.removeClass(h+"focusenter")},1)}).bind("mouseenter focusin",
function(){clearTimeout(s);e.addClass(h+"fover")}).bind("mouseleave focusout",function(){clearTimeout(s);s=setTimeout(function(){e.removeClass(h+"fover")},1)})}e.jmeFn("addControls",q);p&&j.controlbar&&e.jmeProp("controlbar",!0)})};a.jme.defineProp("isPlaying",{get:function(b){return!a.prop(b,"ended")&&!a.prop(b,"paused")&&1<a.prop(b,"readyState")&&!a.data(b,"mediaerror")},readonly:!0});a.jme.defineProp("player",{get:function(){return a.jme.data(this,"player")||null},readonly:!0});a.jme.defineProp("media",
{get:function(){return a.jme.data(this,"media")||null},readonly:!0});a.jme.defineProp("srces",{get:function(b){var b=a.jme.data(b),d=b.media.prop("src"),c=[];return d?[{src:d}]:c=a.map(a("source",b.media).get(),function(b){var d={src:a.prop(b,"src")},c=a.attr(b,"media");if(c)d.media=c;if(c=a.attr(b,"type"))d.type=c;return d})},set:function(b,d){var c=a.jme.data(b),e=function(b,d){"string"==typeof d&&(d={src:d});a(document.createElement("source")).attr(d).appendTo(c.media)};c.media.removeAttr("src").find("source").remove();
a.isArray(d)?a.each(d,e):e(0,d);setTimeout(function(){c.media.callProp("load")},0);return"noDataSet"}});a.jme.defineMethod("togglePlay",function(){a(this).callProp(l.isPlaying.get(this)?"pause":"play")});a.jme.defineProp("controlbar",{set:function(b,d){var d=!!d,c=a.jme.data(b),e=a("div.jme-default-media-overlay, div.jme-default-control-bar",c.player),f=a.jme.plugins["media-controls"],j="";d&&!e[0]?c._controlbar?c._controlbar.appendTo(c.player):(c.media.prop("controls",!1),a.each(f.pluginOrder,function(b,
d){var c=a.jme.plugins[d];c&&c.structure?j+=c.structure.replace("{%class%}",h+d).replace("{%text%}",c.text||""):d&&-1!=d.indexOf("<")&&(j+=d)}),c._controlbar=a(f.barStructure),e=c._controlbar.find("div.jme-cb-box").addClass(h+"media-controls"),f=c._controlbar.filter("div.jme-default-media-overlay").addClass(h+"play-pause"),f=f.add(e),f=f.add(a(j).appendTo(e)),c._controlbar.appendTo(c.player),c.player.jmeFn("addControls",f)):d||e.detach();f=e=null;return d}});a.jme.defineMethod("addControls",function(b){var d=
a.jme.data(this)||{};d.media&&(b=a(b),a.each(a.jme.plugins,function(c,e){b.filter("."+e.className).add(b.find("."+e.className)).each(function(){var b=a(this),c=a.jme.data(this);c.player=d.player;c.media=d.media;if(!c.rendered)c.rendered=!0,e.options&&a.each(e.options,function(a,b){a in c||(c[a]=b)}),e._create(b,d.media,d.player,c),b=null})}),d.player.triggerHandler("controlsadded"))});a.jme.defineMethod("updateControlbar",function(){var b=a("."+a.jme.classNS+"time-slider",this);if(b[0]&&"absolute"!==
b.css("position")){var d=b.parent().width(),c=0;b.siblings().each(function(){this!==b[0]&&"absolute"!==a.css(this,"position")&&(c+=Math.floor(a(this).outerWidth(!0)))});b.width(d-c-(b.outerWidth(!0)-b.width())-0.5)}});a.jme.registerPlugin("media-controls",{pluginOrder:'play-pause,<div class="media-bar">,currenttime-display,time-slider,duration-display,<div class="volume-controls">,mute-unmute,volume-slider,</div>,fullscreen,</div>'.split(","),barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar"><div class="jme-cb-box"></div></div>',
_create:function(a,d,c){var e,f=function(){clearTimeout(e);a.jmeFn("updateControlbar");e=setTimeout(function(){a.jmeFn("updateControlbar")},9)};setTimeout(function(){d.bind("loadedmetadata volumechange play pause ended emptied",f);c.bind("updatetimeformat controlsadded playerdimensionchange",f)},1);f()}});(function(){var b={add:function(b,c,e){var f=a.data(b,"jmeuseractivity")||a.data(b,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),h=a(b),k=function(){if(!f.idle)f.idle=!0,f.trigger.userinactive&&
h.trigger("userinactive")},p,l,b=function(a){if(a&&!("mousemove"===a.type&&a.pageX===p&&a.pageY===l)){if("mousemove"===a.type)p=a.pageX,l=a.pageY;f.idleTimer&&clearTimeout(f.idleTimer);f.idleTimer=setTimeout(k,f.idletime);if(f.idle)f.idle=!1,f.trigger.useractive&&h.trigger("useractive")}};f.idletime=(c||{}).idletime||f.idletime;if(c&&"idle"in c)f.idle=c.idle;f.trigger[e]=!0;if(!f.bound)h.bind("mouseleave.jmeuseractivity",k).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",
b),f.bound=!0;f.idle||b({type:"initunidled"})},remove:function(b,c){var e=a.data(b,"jmeuseractivity")||a.data(b,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});e.trigger[c]=!1;if(!e.trigger.useractive&&!e.trigger.userinactive)a(b).unbind(".jmeuseractivity"),e.bound=!1}};a.each(["useractive","userinactive"],function(c,e){a.event.special[e]={setup:function(a){b.add(this,a,e)},teardown:function(){b.remove(this,e)}}})})();var e=function(b,c){a("video, audio",b).add(c.filter("video, audio")).filter("[data-muted]").each(function(){a.prop(this,
"muted",!0)}).end().filter("[data-volume]").each(function(){var b=a(this).data("volume");1>=b&&0<=b&&a.prop(this,"volume",b)});a(m,b).add(c.filter(m)).jmePlayer()};a(function(){c();e(document,a([]))});n.ready("mediaelement",function(){n.addReady(function(a,c){a!==document&&e(a,c)})})})(jQuery);
(function(a){function n(a,f){var e,b,d;return{get:function(){return d?void 0:a.apply(this,arguments)},set:function(){clearTimeout(e);clearTimeout(b);var a=this,c=arguments;d=!0;e=setTimeout(function(){f.apply(a,c);b=setTimeout(function(){d=!1},30)},0)}}}var l={play:1,playing:1},o=function(){a.webshims.loader&&(a.webshims.loader.loadList(["jquery-ui"]),a.webshims.modules["input-widgets"].src&&a.webshims.loader.loadList(["input-widgets"]))};a.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",
pause:"state-playing"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"play / pause",_create:function(c,f){var e=a.jme.getButtonText(c,[this.pseudoClasses.play,this.pseudoClasses.pause]);f.bind("play playing ended pause updateJMEState",function(a){a=a.type;a="updateJMEState"==a?f.jmeProp("isPlaying")?1:0:l[a]?1:0;e(a)}).triggerHandler("updateJMEState");c.bind("click",function(){f.jmeFn("togglePlay");return!1})}});a.jme.registerPlugin("mute-unmute",
{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"mute / unmute",_create:function(c,f){var e=a.jme.getButtonText(c,[this.pseudoClasses.mute,this.pseudoClasses.unmute]);f.bind("volumechange updateJMEState",function(){e(f.prop("muted")?1:0)}).triggerHandler("updateJMEState");c.bind("click",function(){f.prop("muted",!f.prop("muted"));return!1})}});var m=function(c){var f=function(){if(!a.fn._uiSlider)!a.mobile||
!a.mobile.slider?a.fn._uiSlider=a.fn.slider:a.widget("jme._uiSlider",a.ui.slider.prototype);c()};a.webshims.ready("jquery-ui",function(){!a.ui||!a.ui.slider?a.webshims.ready("input-widgets",f):f()})};a.jme.registerPlugin("volume-slider",{structure:'<div  class="{%class%}"></div>',_create:function(a,f){o();var e=n(function(){var b=f.prop("volume");void 0!==b&&a._uiSlider("value",b)},function(a){f.prop({muted:!1,volume:a})});m(function(){a._uiSlider({range:"min",max:1,step:0.05,value:f.prop("volume"),
slide:function(a,c){a.originalEvent&&e.set(c.value)}});f.bind("volumechange",e.get)})}});a.jme.registerPlugin("time-slider",{structure:'<div  class="{%class%}"></div>',options:{format:["mm","ss"]},_create:function(c,f,e){o();var b=n(function(){var a=f.prop("currentTime");isNaN(a)||c._uiSlider("value",a)},function(a){try{f.prop("currentTime",a)}catch(b){}});e.jmeFn("addControls",a('<div class="'+a.jme.classNS+'buffer-progress" />').prependTo(c));m(function(){var a=f.prop("duration");c._uiSlider({range:"min",
max:a||1,disabled:!a,step:0.1,value:f.prop("currentTime"),slide:function(a,c){a.originalEvent&&b.set(c.value)}});f.bind({timeupdate:b.get,emptied:function(){c._uiSlider("option","disabled",!0)},durationchange:function(){c._uiSlider("option","disabled",!1)._uiSlider("option","max",f.prop("duration"))}})})}});a.jme.defineMethod("concerningRange",function(c,f){var e={start:0,end:0};c||(c="buffered");c=a.prop(this,c);null==f&&(f=a.prop(this,"currentTime"));if(!c||!("length"in c))return e;for(var b=0,
d=c.length;b<d&&!(e.start=c.start(b),e.end=c.end(b),e.start<=f&&e.end>=f);b++);return e});a.jme.defineProp("progress",{get:function(c){c=a.jme.data(c);if(!c.media)return 0;c=100*(c.media.jmeFn("concerningRange").end/c.media.prop("duration"));99.4<c&&(c=100);return c||0},readonly:!0});a.jme.registerPlugin("buffer-progress",{_create:function(c,f,e,b){var d=a('<div class="'+a.jme.classNS+'buffer-progress-indicator" />').appendTo(c),c=function(){var a=f.jmeProp("progress");if(b.progress!==a)b.progress=
a,d.css("width",a+"%")};f.bind({progress:c,emptied:function(){d.css("width",0);b.progress=0},playing:c});c()}});var k={hh:6E4,mm:60,ss:1,ms:0.0010},h=function(c,f){var e;f||(f=["mm","ss"]);null==c&&(e=a.jme.data(this),c=a.prop(e.media,"duration"));c||(c=0);e=[];for(var b,d=0,g=f.length;d<g;d++)"ms"==f[d]&&d==g-1?b=Math.round(c/k[f[d]]/10):(b=parseInt(c/k[f[d]],10),c%=k[f[d]]),10>b&&(b="0"+b),e.push(b);return e.join(":")};a.jme.defineMethod("formatTime",h);a.jme.defineProp("format",{set:function(c,
f){a.isArray(f)||(f=f.split(":"));var e=a.jme.data(c);e.format=f;a(c).triggerHandler("updatetimeformat");e.player.triggerHandler("updatetimeformat");return"noDataSet"}});a.jme.registerPlugin("duration-display",{structure:'<div  class="{%class%}"></div>',options:{format:"mm:ss"},_create:function(a,f,e,b){if("string"==typeof b.format)b.format=b.format.split(":");e=function(){a.html(h(f.prop("duration"),b.format))};f.bind("durationchange emptied",e);a.bind("updatetimeformat",e).jmeProp("format",b.format)}});
a.jme.defineProp("countdown",{set:function(c,f){var e=a.jme.data(c);e.countdown=!!f;a(c).triggerHandler("updatetimeformat");e.player.triggerHandler("updatetimeformat");return"noDataSet"}});a.jme.registerPlugin("currenttime-display",{structure:'<div  class="{%class%}"></div>',options:{format:"mm:ss",countdown:!1},_create:function(a,f,e,b){if("string"==typeof b.format)b.format=b.format.split(":");e=function(){var d=f.prop("currentTime");b.countdown&&(d=(f.prop("duration")||0)-d,0.7>d&&(d=0));a.html(h(d,
b.format))};f.bind("timeupdate emptied durationchange",e);a.bind("updatetimeformat",e).jmeProp("format",b.format)}});a.jme.fullscreen=function(){var c,f,e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(b){c=[];a(b).parentsUntil("body").each(function(){var b=a.curCSS(this,"position"),d=this.scrollLeft,e=this.scrollTop,g;f={elemStyle:this.style,elem:this};if("static"!==b)g=!0,f.pos=f.elemStyle.position,this.style.position="static";if(d)g=!0,f.left=d;if(e)g=!0,f.top=
e;g&&c.push(f)});f=null},cancelFullScreen:function(){c&&a.each(c,function(a,b){if("pos"in b)b.elemStyle.position=b.pos;if(b.left)b.elem.scrollLeft=b.left;if(b.top)b.elem.scrollTop=b.top})},eventName:"fullscreenchange",prefix:""},b="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.cancelFullScreen)e.supportsFullScreen=!0;else for(var d=0,g=b.length;d<g;d++)if(e.prefix=b[d],"undefined"!=typeof document[e.prefix+"CancelFullScreen"]){e.supportsFullScreen=!0;break}if(e.supportsFullScreen)e.eventName=
e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(e.prefix){case "":return document.fullScreen;case "webkit":return document.webkitIsFullScreen;default:return document[e.prefix+"FullScreen"]}},e.requestFullScreen=function(a){return""===e.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},e.cancelFullScreen=function(){return""===e.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()};return e}();a.jme.defineProp("fullscreen",{set:function(c,f){var e=
a.jme.data(c);if(!e||!e.player)return"noDataSet";if(f){if(e.player.hasClass(a.jme.classNS+"player-fullscreen"))return"noDataSet";e.scrollPos={top:a(window).scrollTop(),left:a(window).scrollLeft()};a(document).unbind(".jmefullscreen").bind("keydown.jmefullscreen",function(a){if(27==a.keyCode)return e.player.jmeProp("fullscreen",!1),!1});try{a.jme.fullscreen.requestFullScreen(e.player[0])}catch(b){}a("html").addClass(a.jme.classNS+"has-media-fullscreen");e.player.addClass(a.jme.classNS+"player-fullscreen");
e.media.addClass(a.jme.classNS+"media-fullscreen");a.jme.fullscreen.supportsFullScreen&&a(document).bind(a.jme.fullscreen.eventName+".jmefullscreen",function(b){var d=a.jme.fullscreen.isFullScreen();d&&c==b.target?a(c).triggerHandler("playerdimensionchange",["fullscreen"]):d||e.player.jmeProp("fullscreen",!1)});e.player.triggerHandler("playerdimensionchange",["fullwindow"]);e.media.callProp("play")}else{if(!e.player.hasClass(a.jme.classNS+"player-fullscreen"))return"noDataSet";a(document).unbind(".jmefullscreen");
a("html").removeClass(a.jme.classNS+"has-media-fullscreen");e.player.removeClass(a.jme.classNS+"player-fullscreen");e.media.removeClass(a.jme.classNS+"media-fullscreen");try{a.jme.fullscreen.cancelFullScreen()}catch(d){}e.player.triggerHandler("playerdimensionchange");e.scrollPos&&(a(window).scrollTop(e.scrollPos.top),a(window).scrollLeft(e.scrollPos.left),delete e.scrollPos)}return"noDataSet"},get:function(c){if((c=a.jme.data(c))&&c.player)return!c.player.hasClass(a.jme.classNS+"player-fullscreen")?
!1:a.jme.fullscreen.isFullScreen()||"fullwindow"}});a.jme.registerPlugin("fullscreen",{pseudoClasses:{enter:"state-enterfullscreen",exit:"state-exitfullscreen"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"enter fullscreen / exit fullscreen",_create:function(c,f,e){var b=a.jme.getButtonText(c,[this.pseudoClasses.enter,this.pseudoClasses.exit]),f=function(){b(e.hasClass(a.jme.classNS+"player-fullscreen")?1:0)};e.bind("playerdimensionchange",
f);c.bind("click",function(){e.jmeProp("fullscreen",!e.hasClass(a.jme.classNS+"player-fullscreen"));return!1});f()}})})(jQuery);
